import{D as t}from"./DetailsOpen.d5ab58f9.js";import{U as e}from"./UmlScript.44c1627f.js";import{d as o,o as p,c as B,a as n,b as u,e as C,u as s,f as c,r as i}from"./app.aaab6aea.js";import{_ as l}from"./_plugin-vue_export-helper.cdc0426e.js";const D=c(`<h2 id="_1-\u110B\u1167\u11BC\u1109\u1169\u11A8\u1109\u1165\u11BC\u110B\u1175\u1105\u1161\u11AB" tabindex="-1"><a class="header-anchor" href="#_1-\u110B\u1167\u11BC\u1109\u1169\u11A8\u1109\u1165\u11BC\u110B\u1175\u1105\u1161\u11AB" aria-hidden="true">#</a> 1. \uC601\uC18D\uC131\uC774\uB780</h2><p>\uC601\uC18D\uC131\uC740 \uB370\uC774\uD130\uB97C \uC0DD\uC131\uD55C \uD504\uB85C\uADF8\uB7A8\uC774 \uC885\uB8CC\uB418\uC5B4\uB3C4 \uC0AC\uB77C\uC9C0\uC9C0 \uC54A\uB294 \uB370\uC774\uD130\uC758 \uD2B9\uC131\uC744 \uC758\uBBF8\uD569\uB2C8\uB2E4. \uC601\uC18D\uC131\uC740 \uD504\uB85C\uADF8\uB7A8 \uC2E4\uD589 \uC911 \uC8FC\uAE30\uC5B5\uC7A5\uCE58\uC5D0 \uC0DD\uC131\uB41C \uB370\uC774\uD130\uB97C \uD30C\uC77C\uC774\uB098 DB\uC5D0 \uC800\uC7A5\uD568\uC73C\uB85C\uC368 \uBD80\uC5EC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><h2 id="_2-\u110B\u1167\u11BC\u1109\u1169\u11A8\u1109\u1165\u11BC-\u1106\u116E\u11AB\u1106\u1162\u11A8-persistence-context-\u110B\u1175\u1105\u1161\u11AB" tabindex="-1"><a class="header-anchor" href="#_2-\u110B\u1167\u11BC\u1109\u1169\u11A8\u1109\u1165\u11BC-\u1106\u116E\u11AB\u1106\u1162\u11A8-persistence-context-\u110B\u1175\u1105\u1161\u11AB" aria-hidden="true">#</a> 2. \uC601\uC18D\uC131 \uBB38\uB9E5(Persistence Context)\uC774\uB780?</h2><ul><li><strong>\uC5D4\uD2F0\uD2F0\uB97C \uC601\uAD6C \uC800\uC7A5\uD558\uB294 \uD658\uACBD</strong></li><li>\uC5B4\uD50C\uB9AC\uCF00\uC774\uC158\uACFC DB \uC0AC\uC774\uC5D0\uC11C \uAC1D\uCCB4 \uC815\uBCF4\uB97C \uC800\uC7A5\uD558\uACE0 \uC788\uB294 \uAC00\uC0C1\uC758 \uACF5\uAC04</li><li>JPA\uC758 EntityManager\uB97C \uD1B5\uD574 \uC5D4\uD2F0\uD2F0\uB97C \uC870\uD68C/\uC800\uC7A5\uD558\uBA74 EntityManager\uB294 \uC774\uB97C \uC601\uC18D\uC131 \uBB38\uB9E5\uC744 \uD1B5\uD574 \uAD00\uB9AC\uD558\uACE0 \uBCF4\uAD00\uD568</li></ul><div class="mxgraph" style="max-width:100%;margin:auto;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\\&quot;app.diagrams.net\\&quot; modified=\\&quot;2022-08-17T07:05:56.973Z\\&quot; agent=\\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\\&quot; etag=\\&quot;ZxhdnmwIAnI9I7tUfO_7\\&quot; version=\\&quot;20.2.4\\&quot; type=\\&quot;google\\&quot;&gt;&lt;diagram id=\\&quot;eC6KCAFZok1EgxWegQtk\\&quot; name=\\&quot;\uADF8\uB9BC 1. JPA  - \uC601\uC18D\uC131 \uBB38\uB9E5 - DB \uAD00\uACC4\\&quot;&gt;7Vpbk5s2GP01zKSdyQ6SuD4a1kkmnaTbbtrO9E0G2TDBiAh5befXVxhhLsK7bsolza5fDJ8uoHN0jj7J1pC/PbxlOIs+0JAkGtTDg4ZuNQiBhUzxVUSOZcRxURnYsDiUlerAffyVyKAuo7s4JHmrIqc04XHWDgY0TUnAWzHMGN23q61p0n5qhjdECdwHOFGjf8Uhj+QooF3H35F4E1VPBpZblmxxVVmOJI9wSPeNEFpqyGeU8vJqe/BJUoBX4VK2e3Oh9PxijKT8mgbpxz/113/8/ftHN/g1/SX8lHn4y2vZywNOdnLAiyxL4gDzmKbyvfmxAiPfx9sEp+LOW8dJ4tOEslMJCk3ihIaI55zRz6RR4sAVsixRIp9EGCeHi0MAZ2DEjCJ0Szg7iiqygSOhPLZv9zUxliljUYMUo6IAy8mwOfdc4yUuJGT/Bj5LwU+DVsILIDKcttCzvuwKqr3W1ab4XqY85seqoXiRsm1ZqJDA6C4NSfFWQBTvo5iT+wwHReleaFDEIr5NZHFJRzVzwXjEXZ5dF9mEbTaBpdIJjB46rbHYhK7C5s8K/AIE3sYYJ/EmFdeBAIMI8LwCKiGhZCELtnEYFs09RvL4K16dutLFfUbjlJ9GYXqaeVv0teM0L00QKKSkVJFeFaIpl94JjBEpO3NUcWarnMEeykYTIFINTFv6mutoDiguHEtzbk8XhuaJurq29LSFr3nO6cLWFmaluxWrJHdHWB7nnKRCVFD3BbYF5+Pq0MK6vl736RDZuu77kuRGfH36TKdPZPTYrT6lPlWzvVXtUUW6SUOEs6Le9rAp0pWbdUL3QYQZvwkxxyuckwtUdtgSwMMg6GMrtFaWOdByh1CbARP2OGSf3MB4C56tcPAeP+DDTVZr5tX7u8VPj+UOT4qBALEs2X3wupaN8EDwQrdjZsBU4DVAn5u5o8FrDpdPfMCpSE7ZGxxwymbKLoYi8pG5eFk9HftSyZ02uwDO4Nw+e1IBnJ3Vl5zxKc46uzagq5xNmjNWHQ8hxE8Mp7lw2NNu+bmJ8buzWNizG+jCT9JwUZwL1UJowF1zo5+BI6FyQnQVbOKpdMcCcsWSwDHbkMd6bBwYtYhoIN138FHFGEkwjx/aw+hDXz7hrvCYxq4PdBRsme0uyoHKVs0jqKc60jsdlUAoHZ0mw3nY/2F+QGV+gBezbmu6Q5E9t1mjIcz6tx15jinw95cuQeNHdWg0q0PbAzm0siee2qHVDfBLOv24Q4OetGtaix7kR5DWoetzN2rYcxQ1sVGrB30/hlGXyM5l1LDzAwp0v9GoUccFoDGtUaO+TfRc82O2ZVfvbIC7q+XVG6NOR8CZmE01y/6fLLujWbJr9DPSmFmoZ2ah0Qy57/h4VMFVW+Mnrde61nqdOcVqGm2NmeAbxdrtyJharOopxhQzYS7eUGdLYnYT2auXTLfLmz4Qb+K2/h9XWb3+Nxxa/gM=&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div><div class="caption">&lt;\uADF8\uB9BC 1. JPA - \uC601\uC18D\uC131 \uBB38\uB9E5 - DB \uAD00\uACC4&gt;</div><ul><li>EntityManagerFactory <ul><li>EntityManager\uC758 factory class. \uD329\uD1A0\uB9AC \uBA54\uC11C\uB4DC \uD328\uD134\uC5D0 \uB530\uB77C EntityManager \uC778\uC2A4\uD134\uC2A4 \uC0DD\uC131 \uBC0F \uAD00\uB9AC</li></ul></li><li>EntityManager <ul><li>Entity \uAC1D\uCCB4\uC758 \uC601\uC18D\uC131\uC744 \uAD00\uB9AC\uD558\uB294 \uC778\uD130\uD398\uC774\uC2A4. Query \uC778\uC2A4\uD134\uC2A4\uC5D0 \uB300\uD55C \uCD94\uC0C1 \uD329\uD1A0\uB9AC \uD328\uD134\uC744 \uB530\uB984</li></ul></li><li>Entity <ul><li>\uC601\uC18D\uC131 \uAC1D\uCCB4\uB85C DB\uC5D0 \uC800\uC7A5\uB418\uC5B4 \uC788\uB294 \uB370\uC774\uD130\uC5D0 \uB9E4\uD551\uB418\uB294 \uAC1D\uCCB4</li></ul></li><li>EntityTransaction <ul><li>EntityManager\uC640 1\uB3001 \uAD00\uACC4\uB97C \uAC00\uC9C0\uBA70, EntityManager\uC758 \uC5F0\uC0B0 \uAE30\uB2A5\uB4E4\uC744 \uAC00\uC9C0\uACE0 \uAE30\uB2A5\uB4E4\uC744 \uAD00\uB9AC\uD558\uB294 \uAC1D\uCCB4</li></ul></li><li>Persistence <ul><li>EntityManagerFactory \uC778\uC2A4\uD134\uC2A4\uB97C \uC5BB\uAE30 \uC704\uD55C static \uBA54\uC11C\uB4DC\uB97C \uD3EC\uD568\uD558\uB294 \uAC1D\uCCB4</li><li>JPA\uC758 \uC601\uC18D\uC131 \uAD00\uB9AC \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD560 \uB54C \uC774 \uD074\uB798\uC2A4\uC758 static \uBA54\uC11C\uB4DC\uB97C \uC0AC\uC6A9\uD558\uB294 \uAC83\uBD80\uD130 \uC2DC\uC791\uD558\uB294 \uB4EF\uD568(\uCD94\uCE21)</li></ul></li><li>Query <ul><li>JPA vendor\uB4E4\uC5D0 \uB530\uB77C \uC81C\uACF5\uB418\uB294 JPA \uAD6C\uD604\uCCB4(\uCF54\uB4DC\uC5D0 \uB530\uB978 \uCFFC\uB9AC \uAD6C\uD604 \uB4F1)\uC5D0 \uB300\uD55C \uC778\uD130\uD398\uC774\uC2A4</li></ul></li></ul><h2 id="_3-entity-\u1109\u1162\u11BC\u1106\u1167\u11BC\u110C\u116E\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#_3-entity-\u1109\u1162\u11BC\u1106\u1167\u11BC\u110C\u116E\u1100\u1175" aria-hidden="true">#</a> 3. Entity \uC0DD\uBA85\uC8FC\uAE30</h2><div class="mxgraph" style="max-width:100%;margin:auto;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\\&quot;app.diagrams.net\\&quot; modified=\\&quot;2022-08-17T07:27:11.436Z\\&quot; agent=\\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\\&quot; etag=\\&quot;A5Bl3HMtzvRz090QJ0N7\\&quot; version=\\&quot;20.2.4\\&quot; type=\\&quot;google\\&quot;&gt;&lt;diagram id=\\&quot;glIh79aSZspIRKbHw-Fv\\&quot; name=\\&quot;\uADF8\uB9BC 2. Entity \uC0DD\uBA85\uC8FC\uAE30\\&quot;&gt;5Vpdc+I2FP01zLQPYSzLn48hLN1udzPbpp2mfdkRtmyrNTYriwD76ythGZBkAkuNSSa8YF3rwzr36Ojq2gN4N1v9RNE8+1TGOB/YVrwawPHAtoFthfxPWNa1JQCwNqSUxLLSzvBAvmFptKR1QWJcKRVZWeaMzFVjVBYFjphiQ5SWS7VaUubqqHOUYsPwEKHctP5JYpbJWdj+zv4ekzRrRgaenPAMNZXlTKoMxeVyzwTfDeAdLUtWX81WdzgX4DW41O0mB+5uH4zigp3SIEsXk5+/xI9frTn1xovHJB+BG9nLE8oXcsJjzFCU4Vg+NFs3SPDeOOi8MFpmhOGHOYrEnSX3O7dlbJbzEuCXCcnzuzIv6aYdTJLEjiJhLwsmHQw8Xq4YLf/FezVjb+q54o58KEwZXh2cLdhiyMmHyxlmdM2ryAZ2KGFveCeLy50TQeOZbM+BTT0keZNue95Byy8kut+BtG0gfY+X3YEcRPg0kKeB67hWNyAHKsY27BHkP8YPdxGbLbOH0d9fisk/60nFWuj8CRV8iXbH5tjFQeycAnRgT6F3ITZfH2mTzr/hWfnUIdIYcKz9U5AOPR+izpAGCtIwAFdG2jElemSAXGPS7FBABZbvPHNRb7ZKxSY9TPJyGWWIsmGMGJqig87RkdfXAsJBIkRHIE74nnmbk7QQA5E4Fk82qnh/pEib59Ad50UBnibdOM4F2hIBruk40OK4rfH/eM4uQJp8uJ+sf4cfSRHB+19sr0WNzMVRxLciSuGlKEdVRSLVdbRcFDEWg1gt/qi7w7ERwmig8SHLBY3w8e2JIZpidkxhTSfsgey2YNzYKM4RI0/q47bhLkf4XBI+ka2PHUv1MdRdV09TttqPhbSOoKuRxdc6qnEwOtrQYDvt85lhqucc04pU7IcfDYrwJcFUUiC5zCLuZUyfW38UV+Qbmm66EgSaiwltpuiOBu5Y9LVgZSUpZSzRoiywtuwb0x4TnY6UV1/AjrnH+S3cgpdavvDSy5cDQ9eP4ubQB035r03ZcoLGMF7J5nVp3ZRWhMm2li/LddvQg7K8ayoK6/1+PmNKOEyCPtsauq1DeWmObi9bXjRVAM6Z8uL6Wkd6cHBheTFDhhnmA75hcYG+2+6Ra4mL26O4QFsVl9ADJ4tL3XarLZbjPq8tLTLSqjfnactzh759bTmsQdfSFuhokhCeqS22JlK+N3Q9fqa3ndAJ+Z4Je1Uaz6BxzJ0cZUJqvFxIy5QqrPa+LkTCa0PXm1obbnkF4MxXG1Y09/lVKv6jHCPaYW9l9ZZl0PY0FnrmIalNBr1LyaDfnwyqGuieqIBAkb8j4te/0B3OGLyUIMpIjJwqdHpH0IdDBwLH9V3LtXzP7lXoAoOoCSnizoTpw+dfP75ZVXKgRhlgBmfeM4ztXJVC09n5osre8MZhuMg/zUUXi58bivQSQPPISt097G2FI9vHDQ+ZLTWEhvYZu0h3x/Pncswv/HiuBS/22cfzYx1deC8BF08MK5ml15xautpxzXeGLgh3PzUUsfwhcPfu+ucRUYwS7v8cdZgAcsSt3c/pl6ZmlvpyNH3NOYqrkdQOhlZgUMa3z2RjS3eW3y/lzJw73bxWfq2hlyhP0IzkAtD3OH/C4oE6yml6ak5TBBZ6TBb0GpOZeedX/lrrku7TczGw5ZuOXlPS4ISctKrnxz7oOISeDrP59UKLbzqAXMvBtp1h2j7t2L52/g7IeXH3aV8tj7sPJOG7/wA=&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div><div class="caption">&lt;\uADF8\uB9BC 2. Entity \uC0DD\uBA85\uC8FC\uAE30&gt;</div><h3 id="_3-1-\u1107\u1175\u110B\u1167\u11BC\u1109\u1169\u11A8-new-transient" tabindex="-1"><a class="header-anchor" href="#_3-1-\u1107\u1175\u110B\u1167\u11BC\u1109\u1169\u11A8-new-transient" aria-hidden="true">#</a> 3.1. \uBE44\uC601\uC18D(New/Transient)</h3><ul><li>\uC5D4\uD2F0\uD2F0 \uAC1D\uCCB4\uB97C \uC0DD\uC131\uD588\uC73C\uB098 \uC544\uC9C1 \uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0 \uBC18\uC601\uD558\uC9C0 \uC54A\uC740 \uC0C1\uD0DC</li><li>\uC601\uC18D\uC131 \uBB38\uB9E5\uACFC \uC804\uD600 \uAD00\uACC4 \uC5C6\uB294 \uC0C1\uD0DC</li></ul><div class="language-java ext-java"><pre class="language-java"><code><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-2-\u110B\u1167\u11BC\u1109\u1169\u11A8-managed" tabindex="-1"><a class="header-anchor" href="#_3-2-\u110B\u1167\u11BC\u1109\u1169\u11A8-managed" aria-hidden="true">#</a> 3.2. \uC601\uC18D(Managed)</h3><ul><li>\uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0 \uC800\uC7A5\uB41C \uC0C1\uD0DC</li><li>\uC5D4\uD2F0\uD2F0\uAC00 \uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0 \uC758\uD574 \uAD00\uB9AC\uB428</li><li>\uC601\uC18D \uC0C1\uD0DC\uAC00 \uB418\uC790\uB9C8\uC790 DB\uC5D0 \uAC12\uC774 \uC800\uC7A5\uB418\uC9C4 \uC54A\uC74C <ul><li>\uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B(<code>commit()</code>) \uC2DC EntityManager\uC758 <code>flush()</code> \uD638\uCD9C</li><li><code>flush()</code> \uD638\uCD9C \uC2DC \uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0 \uC788\uB294 \uB370\uC774\uD130\uB4E4\uACFC SQL\uC774 DB\uC5D0 \uC804\uB2EC\uB418\uC5B4 \uC800\uC7A5\uB428</li></ul></li></ul><div class="language-java ext-java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">EntityManagerFactory</span> entityManagerFactory<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token class-name">User</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">EntityManager</span> entityManager <span class="token operator">=</span> entityManagerFactory<span class="token punctuation">.</span><span class="token function">createEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">EntityTransaction</span> tx <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uC601\uC18D\uD654</span>
        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// DB \uBC18\uC601</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tx<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        entityManager<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uC601\uC18D\uC131 \uBB38\uB9E5 \uC885\uB8CC(\uC900\uC601\uC18D)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="flush" tabindex="-1"><a class="header-anchor" href="#flush" aria-hidden="true">#</a> flush</h4><ul><li>flush\uB294 \uC601\uC18D\uC131 \uBB38\uB9E5\uC758 \uBCC0\uACBD \uB0B4\uC6A9\uC744 DB\uC5D0 \uBC18\uC601\uD558\uB294 \uC5ED\uD560\uC744 \uC218\uD589\uD568 <ul><li>\uC601\uC18D\uC131 \uBB38\uB9E5\uC744 \uBE44\uC6B0\uB294 \uAC83\uC774 \uC544\uB2D8</li></ul></li><li>1\uCC28 \uCE90\uC2DC\uB97C \uC9C0\uC6B0\uC9C0 \uC54A\uACE0 SQL \uCFFC\uB9AC\uB97C DB\uC5D0 \uC804\uB2EC\uD558\uC5EC DB\uC640 \uC77C\uAD00\uB41C \uC0C1\uD0DC\uB97C \uAC16\uB3C4\uB85D \uB3D9\uAE30\uD654\uD568</li><li><code>flush()</code> \uB610\uB294 \uD2B8\uB79C\uC7AD\uC158 <code>commit()</code> \uC2DC \uC601\uC18D\uC131 \uBB38\uB9E5\uC758 \uCFFC\uB9AC \uC800\uC7A5\uC18C\uC5D0 \uC800\uC7A5\uB410\uB358 SQL\uBB38\uB4E4\uC774 DB\uC5D0 \uC804\uB2EC\uB428</li><li><code>flush()</code> \uC2DC \uBCC0\uACBD \uAC10\uC9C0(Dirty Checking)\uC744 \uD1B5\uD574 \uC601\uC18D\uC131 \uBB38\uB9E5 \uB0B4 \uB370\uC774\uD130\uB4E4\uC758 \uBCC0\uACBD\uB418\uAE30 \uC804 \uC2A4\uB0C5\uC0F7\uACFC \uD604\uC7AC \uC2A4\uB0C5\uC0F7\uC744 \uBE44\uAD50 <ul><li>\uC218\uC815\uB41C Entity\uB97C \uCC3E\uACE0 \uADF8\uC5D0 \uB300\uD55C UPDATE \uCFFC\uB9AC\uB97C \uCFFC\uB9AC \uC800\uC7A5\uC18C\uC5D0 \uC800\uC7A5</li><li>\uCFFC\uB9AC \uC800\uC7A5\uC18C\uC5D0 \uC800\uC7A5\uB41C \uBAA8\uB4E0 \uCFFC\uB9AC\uB97C DB\uC5D0 \uC804\uB2EC\uD558\uC5EC \uB3D9\uAE30\uD654</li></ul></li><li>flush \uC635\uC158 \uC120\uD0DD \uAC00\uB2A5(entityManager.setFlushMode(FlushModeType.~)) <ul><li>FlushModeType.AUTO <ul><li>\uAE30\uBCF8\uAC12, \uCEE4\uBC0B \uB610\uB294 \uCFFC\uB9AC \uC2E4\uD589 \uC2DC \uC790\uB3D9 flush</li></ul></li><li>FlushModeType.COMMIT <ul><li>\uCEE4\uBC0B \uC2DC\uC5D0\uB9CC flush</li></ul></li></ul></li></ul><h3 id="_3-3-\u110C\u116E\u11AB\u110B\u1167\u11BC\u1109\u1169\u11A8-detached" tabindex="-1"><a class="header-anchor" href="#_3-3-\u110C\u116E\u11AB\u110B\u1167\u11BC\u1109\u1169\u11A8-detached" aria-hidden="true">#</a> 3.3. \uC900\uC601\uC18D(Detached)</h3><ul><li>\uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0 \uC800\uC7A5\uB410\uB2E4\uAC00 \uBD84\uB9AC(\uC0AD\uC81C)\uB41C \uC0C1\uD0DC</li><li>\uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B\uC73C\uB85C DB\uC5D0 \uBC18\uC601\uB418\uACE0 \uC2DD\uBCC4\uC790\uB97C \uAC00\uC9C0\uB294 \uB370\uC774\uD130\uB9CC\uC774 \uC900\uC601\uC18D \uC0C1\uD0DC\uAC00 \uB420 \uC218 \uC788\uC74C</li><li>\uC601\uC18D\uC131 \uBB38\uB9E5\uC774 \uC81C\uACF5\uD558\uB294 \uAE30\uB2A5\uB4E4(1\uCC28 \uCE90\uC2DC, \uBCC0\uACBD \uAC10\uC9C0 \uB4F1)\uC744 \uC0AC\uC6A9\uD558\uC9C0 \uBABB\uD568</li></ul><h4 id="_3-3-1-\u110C\u116E\u11AB\u110B\u1167\u11BC\u1109\u1169\u11A8-\u110B\u1166\u11AB\u1110\u1175\u1110\u1175-\u1109\u116E\u110C\u1165\u11BC-\u1107\u1161\u11BC\u1107\u1165\u11B8" tabindex="-1"><a class="header-anchor" href="#_3-3-1-\u110C\u116E\u11AB\u110B\u1167\u11BC\u1109\u1169\u11A8-\u110B\u1166\u11AB\u1110\u1175\u1110\u1175-\u1109\u116E\u110C\u1165\u11BC-\u1107\u1161\u11BC\u1107\u1165\u11B8" aria-hidden="true">#</a> 3.3.1. \uC900\uC601\uC18D \uC5D4\uD2F0\uD2F0 \uC218\uC815 \uBC29\uBC95</h4><h5 id="\u1107\u1167\u11AB\u1100\u1167\u11BC-\u1100\u1161\u11B7\u110C\u1175-dirty-checking-\u1100\u1175\u1102\u1173\u11BC-\u1109\u1161\u110B\u116D\u11BC" tabindex="-1"><a class="header-anchor" href="#\u1107\u1167\u11AB\u1100\u1167\u11BC-\u1100\u1161\u11B7\u110C\u1175-dirty-checking-\u1100\u1175\u1102\u1173\u11BC-\u1109\u1161\u110B\u116D\u11BC" aria-hidden="true">#</a> \uBCC0\uACBD \uAC10\uC9C0(Dirty Checking) \uAE30\uB2A5 \uC0AC\uC6A9</h5><ul><li>\uC900\uC601\uC18D \uC5D4\uD2F0\uD2F0\uC758 id\uB85C \uC601\uC18D \uC5D4\uD2F0\uD2F0\uB97C \uBD88\uB7EC\uC640 \uC218\uC815</li></ul><div class="language-java ext-java"><pre class="language-java"><code><span class="token annotation punctuation">@Transactional</span> <span class="token comment">// \uD2B8\uB79C\uC7AD\uC158 \uC0DD\uC131 \uBC0F \uCEE4\uBC0B/\uB864\uBC31</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Item</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// item: \uBA54\uC11C\uB4DC \uC778\uC790\uB85C \uB118\uC5B4\uC628 \uC900\uC601\uC18D \uC0C1\uD0DC \uC5D4\uD2F0\uD2F0</span>
    <span class="token class-name">Item</span> findItem <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Item</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uAC19\uC740 id\uC758 \uC601\uC18D \uC5D4\uD2F0\uD2F0 \uC870\uD68C</span>
    findItem<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uB370\uC774\uD130 \uC218\uC815</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="\u1107\u1167\u11BC\u1112\u1161\u11B8" tabindex="-1"><a class="header-anchor" href="#\u1107\u1167\u11BC\u1112\u1161\u11B8" aria-hidden="true">#</a> \uBCD1\uD569</h5><ul><li>EntityManager\uC758 \uBCD1\uD569 \uBA54\uC11C\uB4DC <code>merge()</code> \uC0AC\uC6A9 <ul><li><code>merge()</code>\uC758 \uC778\uC790\uB85C \uB118\uC5B4\uC628 \uC900\uC601\uC18D \uC5D4\uD2F0\uD2F0\uC758 id\uB85C 1\uCC28 \uCE90\uC2DC \uC870\uD68C <ul><li>1\uCC28 \uCE90\uC2DC\uC5D0 \uC5C6\uC73C\uBA74 DB \uC870\uD68C \uD6C4 1\uCC28 \uCE90\uC2DC\uC5D0 \uC800\uC7A5</li></ul></li><li>\uC870\uD68C\uB41C \uC601\uC18D \uC5D4\uD2F0\uD2F0\uC758 \uAC12\uC744 \uC900\uC601\uC18D \uC5D4\uD2F0\uD2F0\uC758 \uAC12\uC73C\uB85C \uC218\uC815</li><li>\uC601\uC18D \uC5D4\uD2F0\uD2F0 \uBC18\uD658</li></ul></li></ul><div class="language-java ext-java"><pre class="language-java"><code><span class="token annotation punctuation">@Transactional</span> <span class="token comment">// \uD2B8\uB79C\uC7AD\uC158 \uC0DD\uC131 \uBC0F \uCEE4\uBC0B/\uB864\uBC31</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Item</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// item: \uBA54\uC11C\uB4DC \uC778\uC790\uB85C \uB118\uC5B4\uC628 \uC900\uC601\uC18D \uC0C1\uD0DC \uC5D4\uD2F0\uD2F0</span>
    <span class="token class-name">Item</span> mergeItem <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-\u1109\u1161\u11A8\u110C\u1166-removed" tabindex="-1"><a class="header-anchor" href="#_3-4-\u1109\u1161\u11A8\u110C\u1166-removed" aria-hidden="true">#</a> 3.4. \uC0AD\uC81C(Removed)</h3><ul><li>\uC601\uC18D\uD654\uB41C \uC5D4\uD2F0\uD2F0\uB97C \uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0\uC11C \uC0AD\uC81C \uC694\uCCAD\uD55C \uC0C1\uD0DC</li><li>\uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B \uC2DC DB\uC5D0 \uC0AD\uC81C \uC694\uCCAD</li></ul><div class="language-java ext-java"><pre class="language-java"><code>entityManager<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-\u110B\u1167\u11BC\u1109\u1169\u11A8\u1109\u1165\u11BC-\u1106\u116E\u11AB\u1106\u1162\u11A8\u110B\u1174-\u1110\u1173\u11A8\u110C\u1175\u11BC-\u110B\u1175\u110C\u1165\u11B7" tabindex="-1"><a class="header-anchor" href="#_4-\u110B\u1167\u11BC\u1109\u1169\u11A8\u1109\u1165\u11BC-\u1106\u116E\u11AB\u1106\u1162\u11A8\u110B\u1174-\u1110\u1173\u11A8\u110C\u1175\u11BC-\u110B\u1175\u110C\u1165\u11B7" aria-hidden="true">#</a> 4. \uC601\uC18D\uC131 \uBB38\uB9E5\uC758 \uD2B9\uC9D5/\uC774\uC810</h2><p>\uC2DC\uC2A4\uD15C \uC544\uD0A4\uD14D\uCC98\uC5D0\uC11C \uC911\uAC04 \uACC4\uCE35\uC774 \uC788\uB294 \uACBD\uC6B0 \uB2E4\uC74C\uACFC \uAC19\uC740 \uBC29\uBC95\uC73C\uB85C \uC131\uB2A5\uC744 \uAC1C\uC120\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><ul><li>I/O\uB97C \uC694\uCCAD <strong>\uBC84\uD37C\uB9C1</strong> \uBC0F \uBC30\uCE58 \uCC98\uB9AC\uB97C \uD1B5\uD55C \uBB38\uB9E5 \uAD50\uD658 \uCD5C\uC18C\uD654</li><li>\uB370\uC774\uD130 <strong>\uCE90\uC2F1</strong>\uC744 \uD1B5\uD55C \uB370\uC774\uD130 \uC811\uADFC \uC18D\uB3C4 \uD5A5\uC0C1</li></ul><p>JPA\uC758 \uC601\uC18D\uC131 \uBB38\uB9E5\uC740 \uC5B4\uD50C\uB9AC\uCF00\uC774\uC158\uACFC DB \uC0AC\uC774\uC5D0\uC11C \uB3D9\uC791\uD558\uAE30 \uB54C\uBB38\uC5D0 \uC704 \uB450 \uBC29\uBC95\uC744 \uC774\uC6A9\uD55C \uD2B9\uC9D5\uACFC \uC774\uC810\uC744 \uAC00\uC9D1\uB2C8\uB2E4.</p><h3 id="_4-1-1\u110E\u1161-\u110F\u1162\u1109\u1175-cache" tabindex="-1"><a class="header-anchor" href="#_4-1-1\u110E\u1161-\u110F\u1162\u1109\u1175-cache" aria-hidden="true">#</a> 4.1. 1\uCC28 \uCE90\uC2DC(Cache)</h3><ul><li>\uB9F5 \uC790\uB8CC\uAD6C\uC870\uB85C \uAD6C\uD604\uB41C 1\uCC28 \uCE90\uC2DC \uACF5\uAC04</li><li>\uB9F5\uC758 Key\uB294 \uC5D4\uD2F0\uD2F0 id, Value\uB294 \uC5D4\uD2F0\uD2F0 \uAC12</li><li>\uC5D4\uD2F0\uD2F0 id\uB85C \uC870\uD68C \uC2DC 1\uCC28 \uCE90\uC2DC\uB97C \uBA3C\uC800 \uD0D0\uC0C9\uD558\uACE0 \uC5C6\uC73C\uBA74 DB \uD0D0\uC0C9 <ul><li>\uB2E8\uC77C \uD2B8\uB79C\uC7AD\uC158 \uB0B4 \uB3D9\uC77C id\uB85C \uC870\uD68C\uD560 \uACBD\uC6B0 SQL \uD55C \uBC88\uB9CC \uBC1C\uC0DD</li></ul></li><li>\uC870\uD68C \uC131\uB2A5 \uD5A5\uC0C1 <ul><li>\uB2E8\uC77C \uD2B8\uB79C\uC7AD\uC158 \uB0B4\uC5D0\uC11C\uB9CC \uCE90\uC2DC \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC788\uAE30 \uB54C\uBB38\uC5D0 \uADF9\uC801\uC778 \uC131\uB2A5 \uD5A5\uC0C1\uC740 \uAE30\uB300\uD558\uAE30 \uD798\uB4EC</li><li>\uBE44\uC988\uB2C8\uC2A4 \uB85C\uC9C1\uC774 \uBCF5\uC7A1\uD55C \uACBD\uC6B0 \uD6A8\uACFC \uC788\uC74C</li></ul></li></ul><h3 id="_4-2-\u1103\u1169\u11BC\u110B\u1175\u11AF\u1109\u1165\u11BC-identity-\u1107\u1169\u110C\u1161\u11BC" tabindex="-1"><a class="header-anchor" href="#_4-2-\u1103\u1169\u11BC\u110B\u1175\u11AF\u1109\u1165\u11BC-identity-\u1107\u1169\u110C\u1161\u11BC" aria-hidden="true">#</a> 4.2. \uB3D9\uC77C\uC131(Identity) \uBCF4\uC7A5</h3><ul><li>\uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0\uC11C \uC601\uC18D \uC5D4\uD2F0\uD2F0\uC758 \uB3D9\uC77C\uC131\uC744 \uBCF4\uC7A5\uD568 <ul><li>\uAC19\uC740 id\uB85C \uC870\uD68C\uD560 \uACBD\uC6B0 \uD56D\uC0C1 \uAC19\uC740 \uAC1D\uCCB4 \uC870\uD68C \uAC00\uB2A5(<code>==</code>\uC5F0\uC0B0 \uACB0\uACFC true)</li></ul></li><li>1\uCC28 \uCE90\uC2DC\uC640 \uB3D9\uC77C\uC131 \uBCF4\uC7A5\uC744 \uD1B5\uD574 \uC5B4\uD50C\uB9AC\uCF00\uC774\uC158 \uB808\uBCA8\uC5D0\uC11C \uD2B8\uB79C\uC7AD\uC158 \uACA9\uB9AC \uC218\uC900 Repeatable read \uC9C0\uC6D0 <ul><li>DB\uC758 \uD2B8\uB79C\uC7AD\uC158 \uACA9\uB9AC \uC218\uC900\uACFC \uBCC4\uAC1C</li></ul></li></ul><h3 id="_4-3-\u1110\u1173\u1105\u1162\u11AB\u110C\u1162\u11A8\u1109\u1167\u11AB-\u110A\u1173\u1100\u1175-\u110C\u1175\u110B\u1167\u11AB-transactional-write-behind" tabindex="-1"><a class="header-anchor" href="#_4-3-\u1110\u1173\u1105\u1162\u11AB\u110C\u1162\u11A8\u1109\u1167\u11AB-\u110A\u1173\u1100\u1175-\u110C\u1175\u110B\u1167\u11AB-transactional-write-behind" aria-hidden="true">#</a> 4.3. \uD2B8\uB79C\uC7AD\uC158 \uC4F0\uAE30 \uC9C0\uC5F0(Transactional Write-behind)</h3><ul><li>flush() \uD638\uCD9C \uC804\uAE4C\uC9C0 SQL\uC744 \uBA54\uBAA8\uB9AC(\uCFFC\uB9AC \uC800\uC7A5\uC18C)\uC5D0 \uC800\uC7A5\uD574\uB460(\uBC84\uD37C\uB9C1)</li><li>JDBC Batch SQL \uAE30\uB2A5\uC744 \uD1B5\uD574 \uD55C \uBC88\uC5D0 SQL \uC804\uC1A1</li></ul><div class="language-java ext-java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">EntityManagerFactory</span> entityManagerFactory<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Data</span> data1<span class="token punctuation">,</span> <span class="token class-name">Data</span> data2<span class="token punctuation">,</span> <span class="token class-name">Data</span> data3<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// data1, 2, 3\uC740 \uBE44\uC601\uC18D \uC0C1\uD0DC</span>
    <span class="token class-name">EntityManager</span> entityManager <span class="token operator">=</span> entityManagerFactory<span class="token punctuation">.</span><span class="token function">createEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">EntityTransaction</span> tx <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">/* 1. \uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B\uAE4C\uC9C0 INSERT SQL\uC744 \uBA54\uBAA8\uB9AC\uC5D0 \uBAA8\uC544\uB460(\uBC84\uD37C\uB9C1) */</span>
        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uD2B8\uB79C\uC7AD\uC158 \uC2DC\uC791</span>
        entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>data3<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// -- \uC5EC\uAE30\uAE4C\uC9C0 \uC544\uC9C1 INSERT SQL\uC744 DB\uC5D0 \uC804\uB2EC\uD558\uC9C0 \uC54A\uC74C</span>

        <span class="token comment">/* 2. \uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B \uC2DC JDBC Batch SQL \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD574 \uD55C \uBC88\uC5D0 SQL \uC804\uB2EC */</span>
        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tx<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        entityManager<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><ul><li>INSERT \uBFD0 \uC544\uB2C8\uB77C UPDATE, DELETE \uB3D9\uC791\uC5D0 \uB300\uD574\uC11C\uB3C4 \uB3D9\uC77C\uD558\uAC8C \uBC84\uD37C\uB9C1 \uC801\uC6A9</li></ul><h3 id="_4-4-\u1107\u1167\u11AB\u1100\u1167\u11BC-\u1100\u1161\u11B7\u110C\u1175-dirty-checking" tabindex="-1"><a class="header-anchor" href="#_4-4-\u1107\u1167\u11AB\u1100\u1167\u11BC-\u1100\u1161\u11B7\u110C\u1175-dirty-checking" aria-hidden="true">#</a> 4.4. \uBCC0\uACBD \uAC10\uC9C0(Dirty Checking)</h3><ul><li>\uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0 \uC601\uC18D\uB41C \uC5D4\uD2F0\uD2F0 \uC218\uC815 \uC2DC \uC774\uB97C \uC790\uB3D9\uC73C\uB85C \uBC18\uC601\uD558\uB294 \uAE30\uB2A5</li><li>\uC601\uC18D\uC131 \uBB38\uB9E5 1\uCC28 \uCE90\uC2DC\uC5D0 \uC5D4\uD2F0\uD2F0\uB97C \uCD5C\uCD08 \uC800\uC7A5\uD560 \uB54C \uC2A4\uB0C5\uC0F7\uC744 \uC800\uC7A5\uD574\uB450\uACE0, \uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B \uC2DC\uC810\uC5D0 \uD574\uB2F9 \uC5D4\uD2F0\uD2F0\uC758 \uC2A4\uB0C5\uC0F7\uACFC \uBE44\uAD50\uD558\uC5EC \uBCC0\uACBD \uC720\uBB34\uB97C \uAC10\uC9C0\uD558\uACE0 \uC774\uC5D0 \uB300\uD55C UPDATE SQL \uC804\uB2EC</li></ul><blockquote><h4>Dirty Checking \uB3D9\uC791 \uD750\uB984</h4> 1. \uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B \uC2DC\uB3C4 2. \uCEE4\uBC0B \uC2DC\uC810 \uC601\uC18D\uC131 \uBB38\uB9E5\uC5D0 \uC874\uC7AC\uD558\uB294 \uC5D4\uD2F0\uD2F0\uB4E4\uC758 \uC2A4\uB0C5\uC0F7\uACFC \uD574\uB2F9 \uC5D4\uD2F0\uD2F0\uB4E4\uC758 \uCD5C\uCD08 \uC2A4\uB0C5\uC0F7\uACFC \uBE44\uAD50, \uBCC0\uACBD\uB41C \uC5D4\uD2F0\uD2F0 \uAC10\uC9C0 3. \uBCC0\uACBD\uB41C \uAC01 \uC5D4\uD2F0\uD2F0\uBCC4\uB85C UPDATE SQL\uC744 \uC0DD\uC131\uD558\uACE0 \uC4F0\uAE30 \uC9C0\uC5F0 SQL \uC800\uC7A5\uC18C\uC5D0 \uC800\uC7A5 4. EntityManager\uC758 \`flush()\` \uD638\uCD9C, SQL \uC800\uC7A5\uC18C\uC5D0 \uC800\uC7A5\uB41C \uBAA8\uB4E0 SQL\uC744 DB\uC5D0 \uC804\uB2EC \uBC0F \uC2E4\uD589 5. \uD2B8\uB79C\uC7AD\uC158 \uCEE4\uBC0B \uC885\uB8CC </blockquote><div class="language-java ext-java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">JpaApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">StudentService</span> studentService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">StudentRepository</span> studentRepository<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token constant">JPA_</span>\uBCC0\uACBD\uAC10\uC9C0_\uD14C\uC2A4\uD2B8<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">StudentEntity</span> inserted <span class="token operator">=</span> studentService<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">StudentEntity</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;test name&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;test info&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        studentService<span class="token punctuation">.</span><span class="token function">updateInfo</span><span class="token punctuation">(</span>inserted<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;updated info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StudentEntity</span> saved <span class="token operator">=</span> studentRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>saved<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;updated info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="custom-container details"><summary>\uC2E4\uD589 \uACB0\uACFC</summary><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Hibernate: insert into student (info, name, id) values (?, ?, ?)
Hibernate: select studentent0_.id as id1_0_0_, studentent0_.info as info2_0_0_, studentent0_.name as name3_0_0_ from student studentent0_ where studentent0_.id=?
Hibernate: update student set info=?, name=? where id=?
Hibernate: select studentent0_.id as id1_0_, studentent0_.info as info2_0_, studentent0_.name as name3_0_ from student studentent0_
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><ul><li>JpaRepository.save() \uD638\uCD9C\uC774\uB098 \uCFFC\uB9AC\uB97C \uC0DD\uC131\uD558\uC9C0 \uC54A\uC558\uC74C\uC5D0\uB3C4 UPDATE SQL \uCFFC\uB9AC \uBC1C\uC0DD</li><li>UPDATE \uCFFC\uB9AC\uAC00 \uBAA8\uB4E0 \uD544\uB4DC\uB97C \uD3EC\uD568\uD558\uB3C4\uB85D \uC0DD\uC131\uB428</li></ul><h4 id="\u1107\u1167\u11AB\u1100\u1167\u11BC-\u1107\u116E\u1107\u116E\u11AB\u1106\u1161\u11AB-update\u1112\u1161\u1100\u1169-\u1109\u1175\u11C1\u110B\u1173\u11AF-\u1104\u1162" tabindex="-1"><a class="header-anchor" href="#\u1107\u1167\u11AB\u1100\u1167\u11BC-\u1107\u116E\u1107\u116E\u11AB\u1106\u1161\u11AB-update\u1112\u1161\u1100\u1169-\u1109\u1175\u11C1\u110B\u1173\u11AF-\u1104\u1162" aria-hidden="true">#</a> \uBCC0\uACBD \uBD80\uBD84\uB9CC update\uD558\uACE0 \uC2F6\uC744 \uB54C</h4><p>Dirty Checking\uC73C\uB85C \uC0DD\uC131\uB418\uB294 UPDATE \uCFFC\uB9AC\uB294 \uAE30\uBCF8\uC801\uC73C\uB85C \uBAA8\uB4E0 \uD544\uB4DC\uB97C \uD3EC\uD568\uD558\uB294\uB370 \uC774\uB7F4 \uACBD\uC6B0 \uB2E4\uC74C\uACFC \uAC19\uC740 \uC7A5\uC810\uC744 \uAC00\uC9D1\uB2C8\uB2E4.</p><ul><li>\uC0DD\uC131\uB418\uB294 \uCFFC\uB9AC\uAC00 \uD56D\uC0C1 \uBAA8\uB4E0 \uD544\uB4DC\uB97C \uD3EC\uD568\uD55C\uB2E4\uB294 \uADDC\uCE59\uC774 \uAC19\uAE30 \uB54C\uBB38\uC5D0 \uBD80\uD2B8 \uC2E4\uD589 \uC2DC\uC810\uC5D0 \uBBF8\uB9AC \uC0DD\uC131\uD574\uB450\uACE0 \uC7AC\uC0AC\uC6A9 \uAC00\uB2A5\uD568</li><li>DB\uC5D0\uC11C \uCFFC\uB9AC \uC7AC\uC0AC\uC6A9\uC774 \uAC00\uB2A5\uD568(\uC774\uC804\uACFC \uB3D9\uC77C\uD55C \uCFFC\uB9AC\uB97C \uC785\uB825\uBC1B\uC740 \uACBD\uC6B0 \uC774\uC804\uC5D0 \uD30C\uC2F1\uB41C \uCFFC\uB9AC\uB97C \uC7AC\uC0AC\uC6A9)</li></ul><p>\uB2E4\uB9CC, \uD544\uB4DC\uAC00 20~30\uAC1C \uC774\uC0C1\uC778 \uACBD\uC6B0 \uC804\uCCB4 \uD544\uB4DC\uC5D0 \uB300\uD55C UPDATE \uCFFC\uB9AC\uAC00 \uC624\uBC84\uD5E4\uB4DC\uB97C \uAC16\uAC8C \uB418\uC5B4 \uBD80\uB2F4\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uB7F0 \uACBD\uC6B0 \uD14C\uC774\uBE14 \uC815\uADDC\uD654\uAC00 \uC798\uBABB\uB41C \uACBD\uC6B0\uC77C \uD655\uB960\uC774 \uB192\uC9C0\uB9CC, \uC5EC\uC804\uD788 \uB9CE\uC740 \uD544\uB4DC \uC218\uB97C \uAC00\uC9C4\uB2E4\uBA74 <code>@DynamicUpdate</code>\uB85C \uBCC0\uACBD \uD544\uB4DC\uB9CC \uBC18\uC601\uB418\uB3C4\uB85D \uC124\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><details class="custom-container details"><summary>\uC5D4\uD2F0\uD2F0\uB97C \uC815\uC758\uD55C \uD074\uB798\uC2A4\uC5D0 \`@DynamicUpdate\` \uC120\uC5B8</summary><div class="language-java ext-java"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;STUDENT&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@DynamicUpdate</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentEntity</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div></details><p>\uC774\uD6C4 \uD14C\uC2A4\uD2B8 \uCF54\uB4DC\uB97C \uB2E4\uC2DC \uC218\uD589\uD558\uC5EC \uB85C\uADF8\uB97C \uD655\uC778\uD574\uBCF4\uBA74 \uB2E4\uC74C\uACFC \uAC19\uC774 UPDATE \uCFFC\uB9AC\uC5D0 \uC218\uC815\uB41C \uD544\uB4DC <code>info</code>\uB9CC \uD3EC\uD568\uB418\uC5B4 \uC0DD\uC131\uB41C \uAC83\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><details class="custom-container details"><summary>\uC2E4\uD589 \uACB0\uACFC</summary><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Hibernate: insert into student (info, name, id) values (?, ?, ?)
Hibernate: select studentent0_.id as id1_0_0_, studentent0_.info as info2_0_0_, studentent0_.name as name3_0_0_ from student studentent0_ where studentent0_.id=?
Hibernate: update student set info=? where id=?
Hibernate: select studentent0_.id as id1_0_, studentent0_.info as info2_0_, studentent0_.name as name3_0_ from student studentent0_
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="a-\u110E\u1161\u11B7\u110C\u1169" tabindex="-1"><a class="header-anchor" href="#a-\u110E\u1161\u11B7\u110C\u1169" aria-hidden="true">#</a> A. \uCC38\uC870</h2>`,56),A={style:{"text-align":"left"}},r={href:"http://Velog.io",target:"_blank",rel:"noopener noreferrer"},d={href:"https://velog.io/@adam2/JPA%EB%8A%94-%EB%8F%84%EB%8D%B0%EC%B2%B4-%EB%AD%98%EA%B9%8C-orm-%EC%98%81%EC%86%8D%EC%84%B1-hibernate-spring-data-jpa",target:"_blank",rel:"noopener noreferrer"},k={href:"http://Velog.io",target:"_blank",rel:"noopener noreferrer"},E={href:"https://velog.io/@seongwon97/Spring-Boot-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8Persistence-Context",target:"_blank",rel:"noopener noreferrer"},h=n("em",null,"Tistory",-1),F={href:"https://jojoldu.tistory.com/415",target:"_blank",rel:"noopener noreferrer"},m=o({__name:"05-jpa-persistence-context.html",setup(g){return(f,y)=>{const a=i("ExternalLinkIcon");return p(),B("div",null,[D,n("div",A,[n("p",null,[u('adam2, "JPA\uB294 \uB3C4\uB300\uCCB4 \uBB58\uAE4C? (orm, \uC601\uC18D\uC131, hibernate, spring-data-jpa)," '),n("em",null,[n("a",r,[u("Velog.io"),C(a)])]),u(", Apr. 9, 2020. [Online]. Available: "),n("a",d,[u("https://velog.io/@adam2/JPA\uB294-\uB3C4\uB370\uCCB4-\uBB58\uAE4C-orm-\uC601\uC18D\uC131-hibernate-spring-data-jpa"),C(a)]),u(" [Accessed Aug. 17, 2022].")]),n("p",null,[u('seongwon97, "[Spring JPA] \uC601\uC18D\uC131 \uCEE8\uD14D\uC2A4\uD2B8(Persistence Context)," '),n("em",null,[n("a",k,[u("Velog.io"),C(a)])]),u(", Oct. 4, 2021. [Online]. Available: "),n("a",E,[u("https://velog.io/@seongwon97/Spring-Boot-\uC601\uC18D\uC131-\uCEE8\uD14D\uC2A4\uD2B8Persistence-Context"),C(a)]),u(" [Accessed Aug. 17, 2022].")]),n("p",null,[u('\uD5A5\uB85C, "\uB354\uD2F0 \uCCB4\uD0B9 (Dirty Checking)\uC774\uB780?," '),h,u(", Apr. 29, 2019. [Online]. Available: "),n("a",F,[u("https://jojoldu.tistory.com/415"),C(a)]),u(" [Accessed Aug. 18, 2022].")])]),C(s(t)),C(s(e))])}}}),_=l(m,[["__file","05-jpa-persistence-context.html.vue"]]);export{_ as default};
